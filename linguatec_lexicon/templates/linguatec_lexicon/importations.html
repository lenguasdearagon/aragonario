{% extends 'rest_framework/base.html' %}
{% load i18n static %}

{% block title %}{{ title }}{% endblock %}

{% block branding %}
<a class="navbar-brand" rel="nofollow" href="/">{{ title }}</a>
{% endblock %}

{% block content %}
<h1>Importations</h1>

<div class="row">
    <div class="col-12">
        <p>Total importations {{ importations|length }}.</p>
        <table class="table table-hover table-striped">
            <caption>Errors found in the validated file</caption>
            <thead>
                <th>status</th>
                <th>type</th>
                <th>input_file</th>
                <th>created_at</th>
                <th>num_rows</th>
                <th>errors</th>
                <th>Go to</th>
            </thead>
            <tbody>
                {% for importation in importations %}
                <tr>
                    <td>{{ importation.status }}</td>
                    <td>{{ importation.type }}</td>
                    <td>{{ importation.input_file }}</td>
                    <td>{{ importation.created_at }}</td>
                    <td>{{ importation.num_rows }}</td>
                    <td>{{ importation.list_errors|length }}</td>
                    <td>
                        <form action="/api/importationerrors/" method="get">
                        <input name="importation_id" type="hidden" value={{ importation.id }}>
                        <button class="btn btn-primary" type="submit">Go to</button></form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
